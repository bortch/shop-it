(this["webpackJsonpshop-it"]=this["webpackJsonpshop-it"]||[]).push([[0],{122:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(12),i=n.n(l),s=(n(96),n(17)),o=n(18),c=n(21),h=n(19),u=n(22),m=n(125),p=n(14),g=n(1),d=n(11);n(97);function f(e,t){return e*t}function E(e,t,n){return Math.min(n,e*t+t)}var C=n(3),y=n.n(C),v=[10,25,50,100],b=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).handleStartButtonClick=function(){return n.props.onPageChange(0)},n.handlePrevButtonClick=function(){return n.props.onPageChange(n.props.pageIndex-1)},n.handleNextButtonClick=function(){return n.props.onPageChange(n.props.pageIndex+1)},n.handleEndButtonClick=function(){return n.props.onPageChange(n.getNumPages()-1)},n.handlePageSizeChange=function(e){n.props.onPageSizeChange(+e.target.value)},n.handleNumericInputChange=function(e){n.props.onPageChange(e-1)},n.renderPageSizeOption=function(e){return a.createElement("option",{key:e,value:e},e)},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.numResults,n=e.pageIndex,r=e.pageSize,l=e.withBottomMargin,i=this.getNumPages(),s=0===n,o=n===i-1,c=f(n,r),h=E(n,r,t);return a.createElement("div",{className:y()("hz-pagination-controls",{"-with-bottom-margin":l})},a.createElement("div",{className:"hz-pagination-controls-left"},a.createElement(m.b,null,a.createElement(m.a,{disabled:s,icon:"chevron-backward",onClick:this.handleStartButtonClick}),a.createElement(m.a,{disabled:s,onClick:this.handlePrevButtonClick},"Prev")),a.createElement(m.i,{buttonPosition:"none",className:"hz-pagination-controls-stepper",fill:!0,min:1,max:i,minorStepSize:null,onValueChange:this.handleNumericInputChange,value:this.props.pageIndex+1}),a.createElement(m.b,null,a.createElement(m.a,{disabled:o,onClick:this.handleNextButtonClick},"Next"),a.createElement(m.a,{disabled:o,icon:"chevron-forward",onClick:this.handleEndButtonClick})),a.createElement("div",{className:"hz-pagination-controls-text"},"Showing ",c+1," through ",h," ",a.createElement("em",null,"(sorted lexicographically)"))),a.createElement("div",{className:"hz-pagination-controls-right"},this.renderPageSizeSelector()))}},{key:"renderPageSizeSelector",value:function(){return a.createElement("label",{className:"hz-pagination-controls-page-size"},a.createElement("div",{className:"hz-pagination-controls-page-size-text"},"Page size:"),a.createElement("div",{className:"hz-pagination-controls-page-size-selector bp3-select "},a.createElement("select",{onChange:this.handlePageSizeChange,value:this.props.pageSize},v.map(this.renderPageSizeOption))))}},{key:"getNumPages",value:function(){return Math.ceil(this.props.numResults/this.props.pageSize)}}]),t}(a.PureComponent),w=50,F=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={pageIndex:0,pageSize:w},n.renderResultItem=function(e,t){for(var r=n.state,l=f(r.pageIndex,r.pageSize)+t,i=e.map((function(e){return e.name})).join(" "),s=e.map((function(e,t){return a.createElement("span",{key:t,className:"hz-chord-name"},e.name)})),o=[],c=0;c<s.length;c++)c>0&&o.push(a.createElement("span",{key:c+.5,className:"hz-chord-arrow"},"\u2192")),o.push(s[c]);return a.createElement("div",{className:"hz-chord-result",key:i},a.createElement("div",{className:"hz-chord-result-id"},"#",l+1),o)},n.handlePageChange=function(e){return n.setState({pageIndex:e})},n.handlePageSizeChange=function(e){return n.setState({pageSize:e})},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.results,t=this.state,n=t.pageIndex,r=t.pageSize;if(0===e.length)return a.createElement(m.c,null,a.createElement("p",null,a.createElement("strong",null,"No harmonizations found!")),a.createElement("p",null,"This doesn't mean there's no way to harmonize this line\u2014it just means that no progression was found using the limited rules defined in this app."));var l=f(n,r),i=E(n,r,e.length),s=e.slice(l,i).map(this.renderResultItem),o=1===s.length?"is":"are",c=1===s.length?"way":"ways";return a.createElement(m.c,null,a.createElement("p",null,a.createElement("strong",null,"Here ",o," ",function(e){for(var t=e.toString().split("").reverse(),n=[],a=0;a<t.length;a++)a>0&&a%3===0&&n.push(","),n.push(t[a]);return n.reverse().join("")}(e.length)," ",c," to harmonize this melody.")),this.renderPaginationControls(),a.createElement("div",{className:"hz-chord-results"},s),this.renderPaginationControls(!1))}},{key:"renderPaginationControls",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props.results,n=this.state,r=n.pageIndex,l=n.pageSize;if(void 0!==t)return a.createElement(b,{numResults:t.length,pageIndex:r,pageSize:l,onPageChange:this.handlePageChange,onPageSizeChange:this.handlePageSizeChange,withBottomMargin:e})}}]),t}(a.PureComponent),A=n(30),D=n(46),z={C:{pitches:["C","E","G"],name:"C"},C7:{pitches:["C","E","G","Bb"],name:"C7"},Csharp7:{pitches:["C#","F","G#","B"],name:"C#7"},Dm7:{pitches:["D","F","A","C"],name:"Dm7"},D7:{pitches:["D","F#","A","C"],name:"D7"},Dsharp7:{pitches:["D#","G","A#","C#"],name:"D#7"},Em7:{pitches:["E","G","B","D"],name:"Em7"},E7:{pitches:["E","G#","B","D"],name:"E7"},F7:{pitches:["F","A","C","Bb"],name:"F7"},Fsharp7:{pitches:["F#","A#","C#","E"],name:"F#7"},G7:{pitches:["G","B","D","F"],name:"G7"},Gsharp7:{pitches:["G#","C","D#","F#"],name:"G#7"},Am7:{pitches:["A","C","E","G"],name:"Am7"},A7:{pitches:["A","C#","E","G"],name:"A7"},Asharp7:{pitches:["A#","D","F","G#"],name:"A#7"},Bb7:{pitches:["Bb","D","F","Ab"],name:"Bb7"},B7:{pitches:["B","D#","F#","A"],name:"B7"}},B=[[z.C,z.C7],[z.C,z.Dm7],[z.C,z.D7],[z.C,z.Em7],[z.C,z.E7],[z.C,z.F7],[z.C,z.Fsharp7],[z.C,z.G7],[z.C,z.Am7],[z.C,z.A7],[z.C,z.Bb7],[z.C,z.B7]],S=[[z.C7,z.F7],[z.F7,z.Bb7],[z.Bb7,z.Asharp7],[z.Asharp7,z.Bb7],[z.Asharp7,z.Dsharp7],[z.Dsharp7,z.Gsharp7],[z.Gsharp7,z.Csharp7],[z.Csharp7,z.Fsharp7],[z.Fsharp7,z.B7],[z.B7,z.E7],[z.E7,z.A7],[z.A7,z.D7],[z.D7,z.G7],[z.G7,z.C],[z.G7,z.C7],[z.Am7,z.D7],[z.Dm7,z.G7],[z.Em7,z.A7],[z.Em7,z.Am7],[z.A7,z.Dm7]],G=[[z.Dsharp7,z.D7],[z.Dsharp7,z.Dm7],[z.F7,z.Fsharp7],[z.Fsharp7,z.F7],[z.Fsharp7,z.G7],[z.Bb7,z.B7],[z.B7,z.C],[z.B7,z.C7]],I=[[z.C7,z.Csharp7],[z.Csharp7,z.D7],[z.D7,z.Dsharp7],[z.Dsharp7,z.E7],[z.E7,z.F7],[z.F7,z.Fsharp7],[z.Fsharp7,z.G7],[z.G7,z.Gsharp7],[z.Gsharp7,z.A7],[z.A7,z.Asharp7],[z.A7,z.Bb7]],k=[[z.C,z.D7],[z.Bb7,z.C],[z.Bb7,z.C7],[z.D7,z.C],[z.D7,z.C7]],O=[[z.G7,z.Am7]],N=[[z.Am7,z.C],[z.Am7,z.C7]],x=[[z.G7,z.B7]],M=[[z.C7,z.Fsharp7],[z.Csharp7,z.G7],[z.D7,z.Gsharp7],[z.Dsharp7,z.A7],[z.E7,z.Asharp7],[z.E7,z.Bb7],[z.F7,z.B7],[z.Fsharp7,z.C],[z.Fsharp7,z.C7],[z.G7,z.Csharp7],[z.Gsharp7,z.D7],[z.A7,z.Dsharp7],[z.Asharp7,z.E7],[z.Bb7,z.E7],[z.B7,z.F7]],P=[[z.F7,z.C7]],j=[].concat(B,S),R=[].concat(B,S,O,G,I,k,N,x,P,M),L=new Set([z.C,z.Am7,z.G7]),T=new Map,H=new Map,W=new Map;function V(e,t){for(var n=0,a=Object.values(z);n<a.length;n++){var r=a[n];t.set(r.name,new Set([r]))}var l=!0,i=!1,s=void 0;try{for(var o,c=e[Symbol.iterator]();!(l=(o=c.next()).done);l=!0){var h=o.value,u=Object(D.a)(h,2),m=u[0],p=u[1];t.get(m.name).add(p)}}catch(g){i=!0,s=g}finally{try{l||null==c.return||c.return()}finally{if(i)throw s}}}function K(e){var t=[];return function e(t,n,a,r){if(0===t.length)return;var l=t[0],i=(c=_(l)?l:l.pitch,T.get(c)||new Set),s=function(e,t){if(0===e.length)return new Set;return(t?W:H).get(e[e.length-1].name)||new Set}(n,a),o=0===n.length?i:Y(i,s);var c;_(l)||null==l.chord||(o=Y(o,new Set([l.chord])));if(1===t.length){var h=!0,u=!1,m=void 0;try{for(var p,g=o[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var d=p.value;r.push([].concat(Object(A.a)(n),[d]))}}catch(F){u=!0,m=F}finally{try{h||null==g.return||g.return()}finally{if(u)throw m}}}else{var f=t.slice(1),E=!0,C=!1,y=void 0;try{for(var v,b=o[Symbol.iterator]();!(E=(v=b.next()).done);E=!0){var w=v.value;(0!==n.length||L.has(w)||"string"!==typeof l&&w===l.chord)&&e(f,[].concat(Object(A.a)(n),[w]),a,r)}}catch(F){C=!0,y=F}finally{try{E||null==b.return||b.return()}finally{if(C)throw y}}}}(e,[],arguments.length>1&&void 0!==arguments[1]&&arguments[1],t),t.sort(J)}function Y(e,t){var n=new Set;return e.forEach((function(e){t.has(e)&&n.add(e)})),n}function J(e,t){for(var n=Math.min(e.length,t.length),a=0;a<n;a++){var r=e[a].name,l=t[a].name;if(r<l)return-1;if(r>l)return 1}return 0}function _(e){return"string"===typeof e}!function(){for(var e=0,t=Object.values(z);e<t.length;e++){var n=t[e],a=!0,r=!1,l=void 0;try{for(var i,s=n.pitches[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;T.has(o)||T.set(o,new Set),T.get(o).add(n)}}catch(c){r=!0,l=c}finally{try{a||null==s.return||s.return()}finally{if(r)throw l}}}}(),V(R,H),V(j,W);var $={ENTER:13},q=/^([A-Ga-g][#b]?)(\(([A-Ga-g][#b]?(m7|7)?)\))?$/,U=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={circleOfFifthsOnly:!0,melodyInput:"",results:void 0,showMelodyLengthWarning:!1},n.circleOfFifthsFlagEnable=function(){n.setState({circleOfFifthsOnly:!0})},n.circleOfFifthsFlagDisable=function(){n.setState({circleOfFifthsOnly:!1})},n.handleMelodyInputChange=function(e){var t=n.getSanitizedMelodyInput(e.target.value);n.changeMelodyInput(t)},n.handleMelodyInputKeyDown=function(e){e.which===$.ENTER&&!n.state.showMelodyLengthWarning&&n.state.melodyInput.length>0&&n.handleButtonClick()},n.handleButtonClick=function(){var e=n.state,t=e.circleOfFifthsOnly,a=e.melodyInput,r=n.parseMelodyNotes(a);n.setState({results:K(r,t)})},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.showMelodyLengthWarning,t=e?"Melodies can't be longer than 15 notes.":"Valid pitches are C, C#, D, D#, E, F, F#, G, G#, A, A#, Bb, B, and C. Valid chords are C, C7, C#7, Dm7, D7, D#7, Em7, E7, F7, F#7, G7, G#7, Am7, A7, A#7, Bb7, B7.";return r.a.createElement("div",{className:"hz-app"},r.a.createElement("h2",null,"'Shop It: A Simple Barbershop Harmonizer"),r.a.createElement("p",null,'Enter a sequence of pitches in C Major, then click "Harmonize" to see various barbershop chord progressions for that melody.'),r.a.createElement("h3",null,"Examples"),r.a.createElement("p",null,r.a.createElement("ul",null,this.renderExampleListItem("Down Our Way","E B A G A E D",!1),this.renderExampleListItem("Mary Had a Little Lamb","E D C D E E E",!1),this.renderExampleListItem("Chromatic scale","C C# D D# E F F# G",!0),this.renderExampleListItem("Santa Fe","G(G7) F E(C) G F E(Am7)",!0))),r.a.createElement("h3",null,"Notes"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("strong",null,"Forced chords.")," You can force a particular chord for a particular melody note. Just put the chord name in parentheses after the pitch: ",r.a.createElement("code",null,"F#(D7)"),". Make sure the forced chord actually contains the pitch\u2014you won't see any validation messages or error messages if not."),r.a.createElement("li",null,r.a.createElement("strong",null,"Progression permissivity.")," You can decide whether to allow only basic Circle of Fifths motion (e.g. II7 \u2192 V7 \u2192 I) or additional progressions as well (e.g. I#7 \u2192 I7, tritone substitution). Permitting all progressions will give many more results."),r.a.createElement("li",null,r.a.createElement("strong",null,"Melody length.")," For performance reasons, melodies can be at most 15 pitches long. Computating anything longer would likely cook your browser."),r.a.createElement("li",null,r.a.createElement("strong",null,"Letter casing.")," Case matters only for chord names (e.g. because AM7 and Am7 are distinct chords). Case does not matter for pitch names."),r.a.createElement("li",null,r.a.createElement("strong",null,"Playing chords.")," You can play through progressions using ",r.a.createElement("a",{href:"http://cmslewis.github.io/keyano/",target:"_blank"},"Keyano"),", a browser-based piano, if you want.")),r.a.createElement(m.e,{helperText:t,intent:e?p.a.WARNING:p.a.NONE},r.a.createElement(m.d,{fill:!0},r.a.createElement(m.f,{intent:e?p.a.WARNING:p.a.NONE,large:!0,onChange:this.handleMelodyInputChange,onKeyDown:this.handleMelodyInputKeyDown,placeholder:"Enter a melody in C Major...",rightElement:this.renderSearchBarRightElement(),value:this.state.melodyInput}),r.a.createElement(m.a,{className:g.a.FIXED,disabled:e||0===this.state.melodyInput.length,intent:e?p.a.WARNING:p.a.PRIMARY,icon:"music",large:!0,onClick:this.handleButtonClick},"Harmonize!"))),this.maybeRenderResults(),r.a.createElement("div",{className:"hz-attribution"},"Hastily built by ",r.a.createElement("a",{href:"https://www.github.com/cmslewis",target:"_blank"},"Chris Lewis")," from Dec 19 - 21, 2019."))}},{key:"renderExampleListItem",value:function(e,t,n){var a=this;return r.a.createElement("li",null,r.a.createElement("strong",null,e,":")," ",r.a.createElement("code",null,t)," ",r.a.createElement("a",{onClick:function(){a.changeMelodyInput(t),a.setState({circleOfFifthsOnly:!n})}},"(Try it)"))}},{key:"renderSearchBarRightElement",value:function(){var e=this.state.circleOfFifthsOnly,t=e?"Circle of fifths only":"All progressions";return r.a.createElement(m.j,{content:r.a.createElement(m.g,{className:"hz-flag-menu"},r.a.createElement(m.h,{active:e,className:"hz-flag-menu-item",icon:"refresh",onClick:this.circleOfFifthsFlagEnable,text:this.renderHarmonizationOptionsMenuText("Circle of fifths only","Only strict V7 \u2192 I progressions will be used. v7 will also be permitted.")}),r.a.createElement(m.h,{active:!e,className:"hz-flag-menu-item",icon:"layout",onClick:this.circleOfFifthsFlagDisable,text:this.renderHarmonizationOptionsMenuText("All progressions","Other progressions may also be used (e.g. half-step motion, tritone substitutions).")})),position:d.a.BOTTOM_RIGHT},r.a.createElement(m.a,{minimal:!0,rightIcon:"caret-down"},t))}},{key:"renderHarmonizationOptionsMenuText",value:function(e,t){return r.a.createElement("div",{className:"hz-flag-menu-item-text"},r.a.createElement("div",{className:"hz-flag-menu-item-text-title"},e),r.a.createElement("div",{className:"hz-flag-menu-item-text-muted"},t))}},{key:"changeMelodyInput",value:function(e){this.setState({melodyInput:e,showMelodyLengthWarning:this.parseMelodyNotes(e).length>15})}},{key:"parseMelodyNotes",value:function(e){for(var t=e.split(" "),n=[],a=0;a<t.length;a++){var r=t[a].match(q);if(null!=r){var l=r[1].toUpperCase(),i=r[3];if(null!=i){var s=z[i];n.push({pitch:l,chord:s})}else n.push({pitch:l})}}return n}},{key:"getSanitizedMelodyInput",value:function(e){return e.replace("3","#")}},{key:"maybeRenderResults",value:function(){var e=this.state.results;return void 0===e?void 0:r.a.createElement(F,{results:e})}}]),t}(r.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},91:function(e,t,n){e.exports=n(122)},96:function(e,t,n){},97:function(e,t,n){}},[[91,1,2]]]);
//# sourceMappingURL=main.d1978670.chunk.js.map